<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1150">
  <defs>
    <!-- Gradients -->
    <linearGradient id="globalLbGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1a237e;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3949ab;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="regionalLbGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#00695c;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#26a69a;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="k8sGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0277bd;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#29b6f6;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="controlPlaneGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#6a1b9a;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ab47bc;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="redisGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#c62828;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ef5350;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="esGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f57f17;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ffca28;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="dbGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4527a0;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7e57c2;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="innerDmzGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#e65100;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ff9800;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="openamGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#d84315;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ff7043;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="nodeGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1565c0;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#42a5f5;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="corpZoneGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#7b1fa2;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ba68c8;stop-opacity:1" />
    </linearGradient>
    
    <!-- Drop Shadow -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
    
    <!-- Arrow Markers -->
    <marker id="arrowBlue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#1976d2"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#2e7d32"/>
    </marker>
    <marker id="arrowOrange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#ef6c00"/>
    </marker>
    <marker id="arrowPurple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#7b1fa2"/>
    </marker>
    <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#c62828"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1400" height="1150" fill="#f5f5f5"/>
  
  <!-- Title -->
  <text x="700" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#1a237e">
    Core Zone - High-Level Design (HLD) Architecture
  </text>
  <text x="700" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#616161">
    Internal API Gateway | Multi-Region Data Plane | Shared Control Plane | OpenAM SSO (Inner DMZ)
  </text>
  
  <!-- ==================== INNER DMZ SECTION ==================== -->
  <rect x="20" y="70" width="1360" height="100" rx="10" fill="url(#innerDmzGrad)" stroke="#bf360c" stroke-width="2" filter="url(#shadow)"/>
  <text x="700" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white">
    INNER DMZ - Authentication Layer
  </text>
  
  <!-- OpenAM SSO Server -->
  <rect x="450" y="110" width="500" height="50" rx="8" fill="url(#openamGrad)" filter="url(#shadow)"/>
  <text x="700" y="132" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white">üîê OpenAM SSO Server (OAuth 2.0 / OIDC Provider)</text>
  <text x="700" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#ffccbc">/oauth2/authorize ‚Ä¢ /oauth2/token ‚Ä¢ /oauth2/introspect ‚Ä¢ /oauth2/jwks ‚Ä¢ Connected to LDAP/AD</text>
  
  <!-- ==================== DATA PLANE SECTION ==================== -->
  <rect x="20" y="185" width="900" height="430" rx="10" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" filter="url(#shadow)"/>
  <text x="470" y="210" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1565c0">
    CORE ZONE - DATA PLANE (Internal API Gateway)
  </text>
  
  <!-- Internal Systems (Callers) -->
  <rect x="40" y="230" width="120" height="50" rx="8" fill="#455a64" filter="url(#shadow)"/>
  <text x="100" y="255" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">Internal Systems</text>
  <text x="100" y="270" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#b0bec5">API Consumers</text>
  
  <!-- Global Load Balancer -->
  <rect x="200" y="230" width="160" height="50" rx="8" fill="url(#globalLbGrad)" filter="url(#shadow)"/>
  <text x="280" y="253" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Global Load Balancer</text>
  <text x="280" y="268" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#bbdefb">(GION LS / GLB)</text>
  
  <!-- Step 1 Arrow -->
  <line x1="160" y1="255" x2="195" y2="255" stroke="#1976d2" stroke-width="3" marker-end="url(#arrowBlue)"/>
  <circle cx="178" cy="245" r="12" fill="#1976d2"/>
  <text x="178" y="249" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">1</text>
  
  <!-- ===== US REGION ===== -->
  <rect x="40" y="300" width="270" height="160" rx="8" fill="#e8f5e9" stroke="#2e7d32" stroke-width="2"/>
  <text x="175" y="318" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#1b5e20">US REGION</text>
  
  <!-- US Regional LB -->
  <rect x="55" y="330" width="100" height="30" rx="5" fill="url(#regionalLbGrad)" filter="url(#shadow)"/>
  <text x="105" y="350" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">Regional LB</text>
  
  <!-- US K8s Cluster -->
  <rect x="55" y="370" width="240" height="80" rx="5" fill="url(#k8sGrad)" filter="url(#shadow)"/>
  <text x="175" y="388" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">Kubernetes Cluster (US)</text>
  
  <!-- US Worker Nodes -->
  <rect x="65" y="400" width="105" height="40" rx="4" fill="url(#nodeGrad)" stroke="#0d47a1" stroke-width="1"/>
  <text x="117" y="418" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="white">Gateway Node 1</text>
  <text x="117" y="432" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#90caf9">Pod Replicas: 2</text>
  
  <rect x="180" y="400" width="105" height="40" rx="4" fill="url(#nodeGrad)" stroke="#0d47a1" stroke-width="1"/>
  <text x="232" y="418" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="white">Gateway Node 2</text>
  <text x="232" y="432" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#90caf9">Pod Replicas: 2</text>
  
  <!-- ===== EU REGION ===== -->
  <rect x="325" y="300" width="270" height="160" rx="8" fill="#fff3e0" stroke="#ef6c00" stroke-width="2"/>
  <text x="460" y="318" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#e65100">EU REGION</text>
  
  <!-- EU Regional LB -->
  <rect x="340" y="330" width="100" height="30" rx="5" fill="url(#regionalLbGrad)" filter="url(#shadow)"/>
  <text x="390" y="350" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">Regional LB</text>
  
  <!-- EU K8s Cluster -->
  <rect x="340" y="370" width="240" height="80" rx="5" fill="url(#k8sGrad)" filter="url(#shadow)"/>
  <text x="460" y="388" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">Kubernetes Cluster (EU)</text>
  
  <!-- EU Worker Nodes -->
  <rect x="350" y="400" width="105" height="40" rx="4" fill="url(#nodeGrad)" stroke="#0d47a1" stroke-width="1"/>
  <text x="402" y="418" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="white">Gateway Node 1</text>
  <text x="402" y="432" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#90caf9">Pod Replicas: 2</text>
  
  <rect x="465" y="400" width="105" height="40" rx="4" fill="url(#nodeGrad)" stroke="#0d47a1" stroke-width="1"/>
  <text x="517" y="418" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="white">Gateway Node 2</text>
  <text x="517" y="432" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#90caf9">Pod Replicas: 2</text>
  
  <!-- ===== APAC REGION ===== -->
  <rect x="610" y="300" width="270" height="160" rx="8" fill="#fce4ec" stroke="#c2185b" stroke-width="2"/>
  <text x="745" y="318" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#880e4f">APAC REGION</text>
  
  <!-- APAC Regional LB -->
  <rect x="625" y="330" width="100" height="30" rx="5" fill="url(#regionalLbGrad)" filter="url(#shadow)"/>
  <text x="675" y="350" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">Regional LB</text>
  
  <!-- APAC K8s Cluster -->
  <rect x="625" y="370" width="240" height="80" rx="5" fill="url(#k8sGrad)" filter="url(#shadow)"/>
  <text x="745" y="388" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">Kubernetes Cluster (APAC)</text>
  
  <!-- APAC Worker Nodes -->
  <rect x="635" y="400" width="105" height="40" rx="4" fill="url(#nodeGrad)" stroke="#0d47a1" stroke-width="1"/>
  <text x="687" y="418" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="white">Gateway Node 1</text>
  <text x="687" y="432" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#90caf9">Pod Replicas: 2</text>
  
  <rect x="750" y="400" width="105" height="40" rx="4" fill="url(#nodeGrad)" stroke="#0d47a1" stroke-width="1"/>
  <text x="802" y="418" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="white">Gateway Node 2</text>
  <text x="802" y="432" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#90caf9">Pod Replicas: 2</text>
  
  <!-- Step 2 Arrows from Global LB to Regional LBs -->
  <path d="M 280 280 L 280 292 L 105 292 L 105 325" stroke="#2e7d32" stroke-width="2" fill="none" marker-end="url(#arrowGreen)"/>
  <path d="M 280 280 L 280 292 L 390 292 L 390 325" stroke="#2e7d32" stroke-width="2" fill="none" marker-end="url(#arrowGreen)"/>
  <path d="M 280 280 L 280 292 L 675 292 L 675 325" stroke="#2e7d32" stroke-width="2" fill="none" marker-end="url(#arrowGreen)"/>
  <circle cx="280" cy="290" r="12" fill="#2e7d32"/>
  <text x="280" y="294" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">2</text>
  
  <!-- Step 3 Arrows from Regional LBs to K8s -->
  <line x1="105" y1="360" x2="105" y2="368" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowBlue)"/>
  <line x1="390" y1="360" x2="390" y2="368" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowBlue)"/>
  <line x1="675" y1="360" x2="675" y2="368" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowBlue)"/>
  <circle cx="175" cy="365" r="12" fill="#1976d2"/>
  <text x="175" y="369" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">3</text>
  
  <!-- ===== API BACKENDS ===== -->
  <rect x="40" y="480" width="400" height="55" rx="8" fill="#37474f" filter="url(#shadow)"/>
  <text x="240" y="505" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Internal API Backends</text>
  <text x="240" y="522" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#b0bec5">Microservices | Legacy Systems | Databases</text>
  
  <!-- Step 5 Arrow to Backends -->
  <path d="M 175 450 L 175 465 L 240 475" stroke="#455a64" stroke-width="2" fill="none" marker-end="url(#arrowBlue)"/>
  <circle cx="200" cy="465" r="12" fill="#455a64"/>
  <text x="200" y="469" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">5</text>
  
  <!-- Step 4: Gateway to OpenAM (Inner DMZ) for Token Validation -->
  <path d="M 175 400 L 175 380 L 50 380 L 50 135 L 450 135" stroke="#e65100" stroke-width="2" fill="none" marker-end="url(#arrowOrange)" stroke-dasharray="5,3"/>
  <circle cx="120" cy="380" r="12" fill="#e65100"/>
  <text x="120" y="384" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">4</text>
  <text x="180" y="378" font-family="Arial, sans-serif" font-size="8" fill="#e65100">JWT/Token Validation</text>
  
  <!-- Response Arrow -->
  <path d="M 240 480 Q 260 450 280 255 L 160 255" stroke="#78909c" stroke-width="2" fill="none" marker-end="url(#arrowBlue)" stroke-dasharray="8,4"/>
  <text x="265" y="420" font-family="Arial, sans-serif" font-size="8" fill="#546e7f" transform="rotate(-70, 265, 420)">Response</text>
  
  <!-- ==================== CONTROL PLANE SECTION ==================== -->
  <rect x="940" y="185" width="440" height="430" rx="10" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" filter="url(#shadow)"/>
  <text x="1160" y="210" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#6a1b9a">
    CORE ZONE - CONTROL PLANE (Shared)
  </text>
  
  <!-- Control Plane K8s Cluster -->
  <rect x="960" y="225" width="400" height="240" rx="8" fill="url(#controlPlaneGrad)" filter="url(#shadow)"/>
  <text x="1160" y="247" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Kubernetes Cluster - Management</text>
  
  <!-- Management UI -->
  <rect x="980" y="260" width="110" height="50" rx="5" fill="#9c27b0" stroke="#4a148c" stroke-width="1"/>
  <text x="1035" y="282" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">Management UI</text>
  <text x="1035" y="297" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#e1bee7">Console Portal</text>
  
  <!-- Management API -->
  <rect x="1110" y="260" width="110" height="50" rx="5" fill="#9c27b0" stroke="#4a148c" stroke-width="1"/>
  <text x="1165" y="282" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">Management API</text>
  <text x="1165" y="297" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#e1bee7">REST API</text>
  
  <!-- Developer Portal -->
  <rect x="1240" y="260" width="110" height="50" rx="5" fill="#9c27b0" stroke="#4a148c" stroke-width="1"/>
  <text x="1295" y="282" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">Developer Portal</text>
  <text x="1295" y="297" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#e1bee7">API Catalog</text>
  
  <!-- Auth arrows from Control Plane to OpenAM -->
  <path d="M 1035 260 L 1035 200 L 900 200 L 900 135 L 950 135" stroke="#e65100" stroke-width="2" fill="none" marker-end="url(#arrowOrange)" stroke-dasharray="5,3"/>
  <path d="M 1295 260 L 1295 215 L 915 215 L 915 135 L 950 135" stroke="#e65100" stroke-width="2" fill="none" stroke-dasharray="5,3"/>
  <text x="970" y="195" font-family="Arial, sans-serif" font-size="8" fill="#e65100">Console/Portal Login</text>
  
  <!-- Database -->
  <rect x="980" y="325" width="170" height="55" rx="5" fill="url(#dbGrad)" filter="url(#shadow)"/>
  <text x="1065" y="350" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">MongoDB</text>
  <text x="1065" y="367" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#d1c4e9">API Definitions | Config | Plans</text>
  
  <!-- Redis -->
  <rect x="1170" y="325" width="180" height="55" rx="5" fill="url(#redisGrad)" filter="url(#shadow)"/>
  <text x="1260" y="347" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">Redis (Shared)</text>
  <text x="1260" y="363" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#ffcdd2">Rate Limiting | Caching</text>
  
  <!-- Elasticsearch -->
  <rect x="980" y="395" width="370" height="55" rx="5" fill="url(#esGrad)" filter="url(#shadow)"/>
  <text x="1165" y="418" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#3e2723">Elasticsearch</text>
  <text x="1165" y="435" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#4e342e">Analytics | Logs | Metrics | API Usage Data</text>
  
  <!-- Config Sync Label -->
  <rect x="960" y="475" width="420" height="30" rx="5" fill="#7c4dff" opacity="0.3"/>
  <text x="1160" y="495" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#311b92">
    API Configuration Sync to Data Plane Gateways
  </text>
  
  <!-- ==================== FLOW ARROWS ==================== -->
  
  <!-- Step 6: Gateway to Redis (Rate Limit/Cache) -->
  <path d="M 802 450 Q 870 490 960 360" stroke="#c62828" stroke-width="2" fill="none" marker-end="url(#arrowRed)" stroke-dasharray="5,3"/>
  <circle cx="870" cy="460" r="12" fill="#c62828"/>
  <text x="870" y="464" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">6</text>
  <text x="895" y="480" font-family="Arial, sans-serif" font-size="8" fill="#c62828">Rate Limit</text>
  
  <!-- Step 7: Analytics to ES -->
  <path d="M 580 460 Q 850 520 980 430" stroke="#f57f17" stroke-width="2" fill="none" marker-end="url(#arrowOrange)" stroke-dasharray="5,3"/>
  <circle cx="780" cy="500" r="12" fill="#f57f17"/>
  <text x="780" y="504" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">7</text>
  <text x="820" y="515" font-family="Arial, sans-serif" font-size="8" fill="#e65100">Analytics</text>
  
  <!-- Config Sync from Control Plane to Gateways -->
  <path d="M 960 490 Q 800 530 460 470" stroke="#7b1fa2" stroke-width="2" fill="none" marker-end="url(#arrowPurple)" stroke-dasharray="8,4"/>
  <text x="700" y="510" font-family="Arial, sans-serif" font-size="8" fill="#7b1fa2">Config Sync (Pull)</text>
  
  <!-- ==================== CORPORATE ZONE (Users) ==================== -->
  <rect x="940" y="520" width="440" height="95" rx="10" fill="url(#corpZoneGrad)" filter="url(#shadow)"/>
  <text x="1160" y="545" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    CORPORATE ZONE (Admin Users)
  </text>
  
  <rect x="960" y="555" width="130" height="50" rx="5" fill="rgba(255,255,255,0.2)"/>
  <text x="1025" y="575" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">üë§ API Developers</text>
  <text x="1025" y="592" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#e1bee7">Console Access</text>
  
  <rect x="1105" y="555" width="130" height="50" rx="5" fill="rgba(255,255,255,0.2)"/>
  <text x="1170" y="575" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">üë§ Platform Team</text>
  <text x="1170" y="592" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#e1bee7">Admin Access</text>
  
  <rect x="1250" y="555" width="120" height="50" rx="5" fill="rgba(255,255,255,0.2)"/>
  <text x="1310" y="575" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">üë®‚Äçüíª App Developers</text>
  <text x="1310" y="592" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#e1bee7">Portal Access</text>
  
  <!-- Arrow from Corporate Zone to Control Plane -->
  <path d="M 1160 555 L 1160 520" stroke="#7b1fa2" stroke-width="2" fill="none" marker-end="url(#arrowPurple)"/>
  
  <!-- ==================== AUTH FLOW SECTION ==================== -->
  <rect x="20" y="635" width="1360" height="200" rx="10" fill="#e8eaf6" stroke="#3f51b5" stroke-width="2" filter="url(#shadow)"/>
  <text x="700" y="660" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#283593">
    AUTHENTICATION FLOWS (via OpenAM - Inner DMZ)
  </text>
  
  <!-- Flow 1: Console/Portal Login -->
  <text x="40" y="690" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#1a237e">Flow 1: Console/Portal Login (OAuth 2.0)</text>
  
  <!-- Admin User -->
  <rect x="40" y="705" width="100" height="50" rx="8" fill="#546e7f" filter="url(#shadow)"/>
  <text x="90" y="728" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="white">üë§ Admin User</text>
  <text x="90" y="743" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#cfd8dc">(Corporate Zone)</text>
  
  <line x1="140" y1="730" x2="175" y2="730" stroke="#3f51b5" stroke-width="2" marker-end="url(#arrowBlue)"/>
  <circle cx="158" cy="718" r="10" fill="#3f51b5"/>
  <text x="158" y="722" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="white">A</text>
  
  <!-- Console UI -->
  <rect x="180" y="705" width="100" height="50" rx="8" fill="#9c27b0" filter="url(#shadow)"/>
  <text x="230" y="728" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="white">Console UI</text>
  <text x="230" y="743" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#e1bee7">(Core Zone)</text>
  
  <line x1="280" y1="730" x2="315" y2="730" stroke="#3f51b5" stroke-width="2" marker-end="url(#arrowBlue)"/>
  <circle cx="298" cy="718" r="10" fill="#3f51b5"/>
  <text x="298" y="722" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="white">B</text>
  
  <!-- OpenAM -->
  <rect x="320" y="705" width="130" height="50" rx="8" fill="url(#openamGrad)" filter="url(#shadow)"/>
  <text x="385" y="725" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="white">üîê OpenAM SSO</text>
  <text x="385" y="740" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#ffccbc">(Inner DMZ)</text>
  <text x="385" y="752" text-anchor="middle" font-family="Arial, sans-serif" font-size="6" fill="#ffccbc">OAuth2 / OIDC</text>
  
  <line x1="450" y1="730" x2="485" y2="730" stroke="#2e7d32" stroke-width="2" marker-end="url(#arrowGreen)"/>
  <circle cx="468" cy="718" r="10" fill="#2e7d32"/>
  <text x="468" y="722" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="white">C</text>
  
  <!-- JWT Token -->
  <rect x="490" y="705" width="100" height="50" rx="8" fill="#00695c" filter="url(#shadow)"/>
  <text x="540" y="725" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="white">JWT Token</text>
  <text x="540" y="740" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#a7ffeb">+ User Session</text>
  
  <path d="M 540 755 Q 540 775 230 775 Q 230 775 230 755" stroke="#1976d2" stroke-width="2" fill="none" marker-end="url(#arrowBlue)" stroke-dasharray="5,3"/>
  <circle cx="385" cy="780" r="10" fill="#1976d2"/>
  <text x="385" y="784" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="white">D</text>
  <text x="385" y="800" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#1565c0">Return to Console with JWT</text>
  
  <!-- Flow 2: API Call Authentication -->
  <text x="640" y="690" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#1a237e">Flow 2: API Call Authentication (OAuth 2.0)</text>
  
  <!-- API Consumer -->
  <rect x="640" y="705" width="100" height="50" rx="8" fill="#455a64" filter="url(#shadow)"/>
  <text x="690" y="728" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="white">üì± API Consumer</text>
  <text x="690" y="743" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#b0bec5">(Core Zone)</text>
  
  <line x1="740" y1="730" x2="775" y2="730" stroke="#3f51b5" stroke-width="2" marker-end="url(#arrowBlue)"/>
  <circle cx="758" cy="718" r="10" fill="#3f51b5"/>
  <text x="758" y="722" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="white">1</text>
  
  <!-- Get Token -->
  <rect x="780" y="705" width="100" height="50" rx="8" fill="url(#openamGrad)" filter="url(#shadow)"/>
  <text x="830" y="725" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="white">üîê OpenAM</text>
  <text x="830" y="740" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#ffccbc">/oauth2/token</text>
  
  <line x1="880" y1="730" x2="915" y2="730" stroke="#2e7d32" stroke-width="2" marker-end="url(#arrowGreen)"/>
  <circle cx="898" cy="718" r="10" fill="#2e7d32"/>
  <text x="898" y="722" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="white">2</text>
  
  <!-- Call Gateway -->
  <rect x="920" y="705" width="100" height="50" rx="8" fill="url(#nodeGrad)" filter="url(#shadow)"/>
  <text x="970" y="725" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="white">‚ö° API Gateway</text>
  <text x="970" y="740" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#90caf9">Bearer Token</text>
  
  <line x1="1020" y1="730" x2="1055" y2="730" stroke="#e65100" stroke-width="2" marker-end="url(#arrowOrange)" stroke-dasharray="5,3"/>
  <circle cx="1038" cy="718" r="10" fill="#e65100"/>
  <text x="1038" y="722" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="white">3</text>
  
  <!-- Validate Token -->
  <rect x="1060" y="705" width="100" height="50" rx="8" fill="url(#openamGrad)" filter="url(#shadow)"/>
  <text x="1110" y="725" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="white">üîê OpenAM</text>
  <text x="1110" y="740" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#ffccbc">/introspect or JWKS</text>
  
  <line x1="1160" y1="730" x2="1195" y2="730" stroke="#2e7d32" stroke-width="2" marker-end="url(#arrowGreen)"/>
  <circle cx="1178" cy="718" r="10" fill="#2e7d32"/>
  <text x="1178" y="722" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="white">4</text>
  
  <!-- Backend -->
  <rect x="1200" y="705" width="100" height="50" rx="8" fill="#37474f" filter="url(#shadow)"/>
  <text x="1250" y="725" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="white">üîß Backend API</text>
  <text x="1250" y="740" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#b0bec5">(Core Zone)</text>
  
  <path d="M 1250 755 Q 1250 785 690 785 Q 690 785 690 755" stroke="#78909c" stroke-width="2" fill="none" marker-end="url(#arrowBlue)" stroke-dasharray="5,3"/>
  <circle cx="970" cy="790" r="10" fill="#78909c"/>
  <text x="970" y="794" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="white">5</text>
  <text x="970" y="810" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#546e7a">Response</text>
  
  <!-- ==================== LEGEND ==================== -->
  <rect x="20" y="855" width="1360" height="90" rx="10" fill="white" stroke="#9e9e9e" stroke-width="1"/>
  <text x="700" y="875" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#424242">LEGEND</text>
  
  <!-- Zone Legend -->
  <rect x="50" y="890" width="80" height="20" rx="3" fill="url(#innerDmzGrad)"/>
  <text x="140" y="904" font-family="Arial, sans-serif" font-size="10" fill="#424242">Inner DMZ</text>
  
  <rect x="210" y="890" width="80" height="20" rx="3" fill="#e3f2fd" stroke="#1976d2"/>
  <text x="300" y="904" font-family="Arial, sans-serif" font-size="10" fill="#424242">Core Zone</text>
  
  <rect x="380" y="890" width="80" height="20" rx="3" fill="url(#corpZoneGrad)"/>
  <text x="470" y="904" font-family="Arial, sans-serif" font-size="10" fill="#424242">Corporate Zone</text>
  
  <!-- Component Legend -->
  <rect x="560" y="890" width="40" height="20" rx="3" fill="url(#openamGrad)"/>
  <text x="610" y="904" font-family="Arial, sans-serif" font-size="10" fill="#424242">OpenAM</text>
  
  <rect x="680" y="890" width="40" height="20" rx="3" fill="url(#k8sGrad)"/>
  <text x="730" y="904" font-family="Arial, sans-serif" font-size="10" fill="#424242">Gateway</text>
  
  <rect x="800" y="890" width="40" height="20" rx="3" fill="url(#redisGrad)"/>
  <text x="850" y="904" font-family="Arial, sans-serif" font-size="10" fill="#424242">Redis</text>
  
  <rect x="910" y="890" width="40" height="20" rx="3" fill="url(#esGrad)"/>
  <text x="960" y="904" font-family="Arial, sans-serif" font-size="10" fill="#424242">Elasticsearch</text>
  
  <rect x="1040" y="890" width="40" height="20" rx="3" fill="url(#dbGrad)"/>
  <text x="1090" y="904" font-family="Arial, sans-serif" font-size="10" fill="#424242">MongoDB</text>
  
  <!-- Flow Legend -->
  <circle cx="1160" cy="900" r="10" fill="#1976d2"/>
  <text x="1160" y="904" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="white">1</text>
  <text x="1180" y="904" font-family="Arial, sans-serif" font-size="10" fill="#424242">= API Flow</text>
  
  <circle cx="1260" cy="900" r="10" fill="#3f51b5"/>
  <text x="1260" y="904" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="white">A</text>
  <text x="1280" y="904" font-family="Arial, sans-serif" font-size="10" fill="#424242">= Auth Flow</text>
  
  <!-- Version -->
  <text x="1350" y="940" text-anchor="end" font-family="Arial, sans-serif" font-size="8" fill="#9e9e9e">v2.0 | Core Zone HLD with OpenAM (Inner DMZ)</text>
</svg>
